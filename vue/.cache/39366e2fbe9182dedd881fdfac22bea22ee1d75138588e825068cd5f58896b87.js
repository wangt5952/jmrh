{"source":"webpackJsonp([19],{\"6pLu\":function(t,e,n){\"use strict\";var o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(\"div\",{staticClass:\"login-container\",staticStyle:{background:\"#1896d2\"}},[n(\"div\",{staticClass:\"content\",staticStyle:{top:\"50%\"}},[n(\"div\",{staticClass:\"left-content\",style:{\"background-image\":\"url('\"+e.leftImage+\"')\"}}),e._v(\" \"),n(\"div\",{staticClass:\"right-content\"},[n(\"el-card\",{staticClass:\"box-card\"},[n(\"div\",{staticClass:\"clearfix\",attrs:{slot:\"header\"},slot:\"header\"},[n(\"span\",[e._v(\"登录\")])]),e._v(\" \"),n(\"div\",{staticClass:\"item\"},[n(\"el-form\",{ref:\"loginForm\",attrs:{model:e.loginForm,rules:e.loginRules,\"label-position\":e.labelPosition,\"label-width\":\"100px\"}},[n(\"el-form-item\",{attrs:{label:\"\"}},[n(\"el-input\",{attrs:{placeholder:\"请输入用户名\"},model:{value:e.loginForm.userName,callback:function(t){e.$set(e.loginForm,\"userName\",t)},expression:\"loginForm.userName\"}},[n(\"i\",{staticClass:\"el-input__icon el-icon-date\",attrs:{slot:\"prefix\"},slot:\"prefix\"})])],1),e._v(\" \"),n(\"el-form-item\",{staticStyle:{margin:\"0\"},attrs:{label:\"\"}},[n(\"el-input\",{attrs:{type:\"password\",placeholder:\"请输入密码\"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,\"password\",t)},expression:\"loginForm.password\"}},[n(\"i\",{staticClass:\"el-input__icon el-icon-date\",attrs:{slot:\"prefix\"},slot:\"prefix\"})])],1),e._v(\" \"),n(\"el-form-item\",{staticStyle:{margin:\"0\"},attrs:{label:\"\"}},[n(\"el-checkbox\",{staticStyle:{float:\"left\"},model:{value:e.loginForm.isAdmin,callback:function(t){e.$set(e.loginForm,\"isAdmin\",t)},expression:\"loginForm.isAdmin\"}},[e._v(\"管理员\")])],1),e._v(\" \"),n(\"el-form-item\",[e.restEmail?e._e():n(\"el-button\",{attrs:{type:\"primary\"},on:{keyup:function(t){if(!(\"button\"in t)&&e._k(t.keyCode,\"enter\",13,t.key))return null;e.handleLogin(t)}},nativeOn:{click:function(t){t.preventDefault(),e.handleLogin(t)}}},[e._v(\"登录\")]),e._v(\" \"),e.restEmail?n(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.tosendEmailActivate}},[e._v(\"重新发送\")]):e._e(),e._v(\" \"),n(\"span\",{staticClass:\"toLogin\",on:{click:e.toRegister}},[e._v(\"立即注册\")]),e._v(\" \"),n(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.loginForm.isAdmin,expression:\"loginForm.isAdmin\"}],staticClass:\"resetPaw\",on:{click:e.toresetPawManage}},[e._v(\"忘记密码?\")]),e._v(\" \"),n(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:!e.loginForm.isAdmin,expression:\"!loginForm.isAdmin\"}],staticClass:\"resetPaw\",on:{click:e.toresetPaw}},[e._v(\"忘记密码?\")])],1)],1)],1)])],1)])])},staticRenderFns:[]};e.a=o},BT8B:function(t,e,n){var o=n(\"cf0e\");\"string\"==typeof o&&(o=[[t.i,o,\"\"]]),o.locals&&(t.exports=o.locals);n(\"rjj0\")(\"691232f4\",o,!0)},\"T+/8\":function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});var o=n(\"m1D0\"),i=n(\"6pLu\");var r=function(t){n(\"BT8B\")},a=n(\"VU/8\")(o.a,i.a,!1,r,null,null);e.default=a.exports},bUp0:function(t,e,n){\"use strict\";e.d=function(t){return Object(o.a)({url:\"/sysManager/menu/tree\",method:\"get\",data:t})},e.e=function(t){return Object(o.a)({url:\"/user/getMenus\",method:\"get\",data:t})},e.c=function(t){return Object(o.a)({url:\"/sysManager/role?id=\"+t,method:\"get\"})},e.a=function(t){return Object(o.a)({url:\"/sysManager/menu\",method:\"post\",data:t})},e.f=function(t){return Object(o.a)({url:\"/sysManager/menu\",method:\"post\",data:t})},e.b=function(t){return Object(o.a)({url:\"/sysManager/menu?id=\"+t,method:\"delete\"})};var o=n(\"vLgD\")},cf0e:function(t,e,n){(t.exports=n(\"FZ+f\")(!1)).push([t.i,'.login-container{width:100%;height:100vh;background-repeat:no-repeat;background-size:cover;background-position:50%;background-attachment:fixed;position:relative;z-index:1;overflow:hidden;font-size:20px}.login-container .content{width:986px;height:518px;position:absolute;left:50%;z-index:2;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.login-container .content .left-content,.login-container .content .right-content{width:500px;height:500px;-webkit-filter:drop-shadow(4px 4px 4px #cbbd63);filter:drop-shadow(4px 4px 4px #CBBD63)}.login-container .content .left-content{position:absolute;left:0;top:0;z-index:2;background-repeat:no-repeat;background-position:50%;background-size:cover}.login-container .content .right-content{position:absolute;right:0;bottom:-6%;z-index:3}.login-container .content .right-content .box-card .item{position:relative}.login-container .content .right-content .box-card .item .el-tabs__nav-wrap{width:180px;padding-left:12px;overflow:hidden}.login-container .content .right-content .box-card .item .el-form-item__label{display:block;margin-left:60px;height:36px;color:#9ba3af}.login-container .content .right-content .box-card .item .resetPaw{font-size:14px;color:#9ba3af;float:right;margin-right:60px;cursor:pointer}.login-container .content .right-content .box-card .item .el-form-item__content{width:340px}.login-container .content .right-content .box-card .item .el-form-item__content .el-button{width:100px}.login-container .content .right-content .box-card .item .toLogin{display:inline-block;margin-left:20px;color:#483d8b;cursor:pointer;font-size:14px}.login-container .content .right-content .box-card .item .loginQuick{margin-top:30px}.login-container .content .right-content .box-card .item .loginQuick p{height:24px;line-height:24px;color:#9ba3af;font-size:14px}.login-container .content .right-content .box-card .item .loginQuick p:after,.login-container .content .right-content .box-card .item .loginQuick p:before{content:\"\";position:absolute;height:1px;width:20%;background-color:#eee;margin-top:10px}.login-container .content .right-content .box-card .item .loginQuick p:before{left:20%}.login-container .content .right-content .box-card .item .loginQuick p:after{right:20%}.login-container .content .right-content .box-card .item .loginQuick p span{display:inline-block;margin-top:-10px}.login-container .content .right-content .box-card .item .loginQuick .quick-content ul{list-style:none}.login-container .content .right-content .box-card .item .loginQuick .quick-content ul li{width:50px;height:50px;display:inline-block;cursor:pointer}.login-container .content .right-content .box-card .item .loginQuick .quick-content ul li img{width:40px;height:40px}',\"\"])},ipRY:function(t,e,n){t.exports=n.p+\"static/img/bg-1.21328f7.jpg\"},m1D0:function(t,e,n){\"use strict\";var o=n(\"mvHQ\"),a=n.n(o),i=n(\"Xxa5\"),l=n.n(i),r=n(\"exGp\"),s=n.n(r),c=n(\"M9A7\"),u=(n(\"E4LH\"),n(\"bUp0\")),d=n(\"UUZ+\"),g=n(\"ipRY\"),p=n.n(g),m=[];e.a={name:\"login\",data:function(){return{leftImage:p.a,restEmail:!1,labelPosition:\"top\",login_method:\"first\",loginVerify:{phone:\"\",number:\"\"},loginForm:{userName:\"\",password:\"\",isAdmin:!1},loginRules:{username:[{required:!0,trigger:\"blur\",validator:function(t,e,n){n()}}],password:[{required:!0,trigger:\"blur\",validator:function(t,e,n){e.length<5?n(new Error(\"密码不能小于5位\")):n()}}]},loading:!1,pwdType:\"password\",callbackUrl:\"\"}},created:function(){this.keyupSubmit()},mounted:function(){this.$route.query.callback&&(this.$route.query.type?this.callbackUrl=this.$route.query.callback+\"&type=\"+this.$route.query.type:this.callbackUrl=this.$route.query.callback),this.$store.dispatch(\"LogOut\")},methods:{tosendEmailActivate:function(){var a=this;return s()(l.a.mark(function t(){var e,n,o,i,r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return(e={}).email=a.loginForm.userName,t.next=4,Object(c.i)(e);case 4:n=t.sent,n.data,o=n.success,i=n.message,o?(r=a.$createElement,a.$notify({title:\"用户激活提醒\",message:r(\"i\",{style:\"color: teal\"},\"激活帐户邮件已发送到你的邮箱中\"+a.loginForm.userName+\"，点击里面的激活链接\")}),a.restEmail=!1):a.$message({message:i,type:\"success\"});case 9:case\"end\":return t.stop()}},t,a)}))()},handleClick:function(t,e){console.log(t,e)},toresetPaw:function(){this.$router.push({path:\"/resetPaw\"})},toresetPawManage:function(){this.$router.push({path:\"/resetPawManage\"})},toRegister:function(){this.$router.push({path:\"/register\"})},change:function(t){this.loading=!1},showPwd:function(){\"password\"===this.pwdType?this.pwdType=\"\":this.pwdType=\"password\"},login:function(t){window.localStorage.setItem(\"user\",a()(t)),Object(d.a)(m,t)},forload:function(t){for(var e=window.sessionStorage.getItem(\"userType\"),n=0;n<t.length;n++){if(t[n].children&&0<t[n].children.length&&0==t[n].leaf)t[n].meta={title:t[n].label,icon:\"tree\"},t[n].name=t[n].label,t[n].path=\"/\"+t[n].menuUrl,t[n].leaf=!1,t[n].component=t[n].menuUrl,\"1\"==t[n].isMenu&&(t[n].component=\"layout\",t[n].redirect=\"/\"+t[n].menuUrl+\"/\"+t[n].children[0].menuUrl),\"0\"!=e&&\"101\"!=e&&\"dashboard\"!=t[n].menuUrl&&(t[n].hidden=!0);else if(1==t[n].leaf&&\"1\"==t[n].isMenu&&9999!=t[n].sortOrder&&1!=t[n].menuLevel)t[n].meta={title:t[n].label,icon:\"table\"},t[n].name=t[n].label,t[n].path=t[n].menuUrl,t[n].leaf=!0,\"0\"!=e&&\"101\"!=e&&(t[n].hidden=!0),t[n].component=t[n].menuUrl,t[n].children=[];else if(1==t[n].leaf&&\"1\"==t[n].isMenu&&9999==t[n].sortOrder&&1!=t[n].menuLevel)t[n].meta={title:t[n].label,icon:\"table\"},t[n].path=t[n].menuUrl,t[n].name=t[n].menuUrl,t[n].leaf=!0,t[n].hidden=!0,t[n].component=t[n].menuUrl,t[n].children=[];else if(1==t[n].menuLevel&&\"1\"==t[n].isMenu&&1==t[n].leaf){var o={};o.meta={title:t[n].label,icon:\"table\"},t[n].name=t[n].label,o.path=t[n].menuUrl,o.leaf=!0,o.component=t[n].menuUrl,t[n].children=[],t[n].children.push(o),t[n].path=\"/index\",t[n].leaf=!1,t[n].component=\"layout\"}t[n].children&&(t[n].children=this.forload(t[n].children))}return t},handleLogin:function(){var i=this;this.loading=!0;var r=window.sessionStorage.getItem(\"token\");this.$store.dispatch(\"Login\",this.loginForm).then(s()(l.a.mark(function t(){var e,n,o;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.$store.getters.token||null==i.$store.getters.token||\"\"==i.$store.getters.token){t.next=12;break}if(window.localStorage.setItem(\"user\",a()(\"true\")),r||null==i.$store.getters.token){t.next=8;break}return t.next=5,Object(u.e)();case 5:e=t.sent,n=e.data,window.sessionStorage.setItem(\"treeData\",a()(n));case 8:\"\"!=i.callbackUrl?(o=-1<i.callbackUrl.indexOf(\"?\")?\"http://\"+i.callbackUrl+\"&token=\"+window.sessionStorage.getItem(\"token\"):\"http://\"+i.callbackUrl+\"?token=\"+window.sessionStorage.getItem(\"token\"),window.location.href=o):(n&&(n=i.forload(n),i.login(n),i.$router.addRoutes(m)),i.$router.push({path:\"/\"})),t.next=13;break;case 12:\"用户未激活,请重新发送邮箱进行激活！\"==i.$store.getters.message&&(i.restEmail=!0);case 13:case\"end\":return t.stop()}},t,i)}))).catch(function(){i.loading=!1})}}}},mvHQ:function(t,e,n){t.exports={default:n(\"qkKv\"),__esModule:!0}},qkKv:function(t,e,n){var o=n(\"FeBl\"),i=o.JSON||(o.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}}});"}